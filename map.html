<!DOCTYPE html>
<html lang="'en-GB">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,  initial-scale=1">
  <title>CGS Flood Management </title>
  <link rel="stylesheet" href="main.css">
  <!-- W3CSS -->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <!-- Container -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Data file -->
  <script src="data_proposal.js" type="text/javascript"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.js"></script>
  <script src="leaflet-polygon.fillPattern.js"></script>
</head>

<body>
  <div class="topnav">
    <a href="https://www.geos.ed.ac.uk/~s2412750/cgs_flood/index.html">Home</a>
    <a href="https://www.geos.ed.ac.uk/~s2412750/cgs_flood/find.html">Findings</a>
    <a class="active" href="map.html">Interactive Map</a>
    <a href="https://www.geos.ed.ac.uk/~s2412750/cgs_flood/info.html">Further Information</a>
    <a href="https://www.geos.ed.ac.uk/~s2412750/cgs_flood/team.html">Team</a>
  </div>
  <div class="container" style="max-width:100%">
    <div class="row d-flex">
      <div class="col-sm-2" style="margin-top: 20px; overflow: auto; height: 85vh;">
        <button onclick="accordion('routing')" class="w3-button w3-block w3-left-align">
          <b>Routing to Greenspace</b></button>
          <div id="routing" class="w3-container w3-hide">
            <p>(Coming soon...) Go to one of the accessible greenspaces in Edinburgh to relax yourself! Input the starting Post Code (e.g. EH8 9RR) and choose a greenspace in the list, then click "Route".</p>
            <form class="w3-container">
              <input class="w3-input w3-border" type="text" placeholder="Start Post Code">
              <select class="w3-select w3-border" name="option">
                <option value="" disabled selected>Desternation Greenspace</option>
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
                <option value="3">Option 3</option>
              </select><p></p>
              <button class="w3-btn w3-teal">Route</button><p></p>
              </form>
          </div>
        <button onclick="accordion('layer')" class="w3-button w3-block w3-left-align">
          <b>Special Layer Control</b></button>
          <div id="layer" class="w3-container w3-hide">
            <details>
              <summary>Proposed Greenspace</summary>
              <div class="w3-display-container">
                <img src="images/woodland.jpg" class="w3-hover-opacity" alt="Woodland!!!" onclick="turnonwoodland()">
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Woodland</div>
              </div>
              <div style="margin-top:10px" class="w3-display-container">
                <img src="images/meadow.jpg" class="w3-hover-opacity" alt="Meadow" onclick="turnonmeadow()")>
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Meadow</div>
              </div>
              <div style="margin-top:10px" class="w3-display-container">
                <img src="images/willow.jpeg" class="w3-hover-opacity" alt="Livingwillow" onclick="turnonwillow()">
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Livingwillow</div>
              </div>
              <div style="margin-top:10px" class="w3-display-container">
                <img src="images/bush.jpg" class="w3-hover-opacity" alt="Bush" onclick="turnonbush()")>
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Bush</div>
              </div>
              <div style="margin-top:10px" class="w3-display-container">
                <img src="images/largewood.jpg" class="w3-hover-opacity" alt="Large Wood" onclick="turnonlargewood()")>
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Large Wood</div>
              </div>
            </details>
            <details>
              <summary>River Management</summary>
              <div class="w3-display-container">
                <img src="images/dam.JPG" class="w3-hover-opacity" alt="dam" onclick="turnonwoodland()">
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Dam</div>
              </div>
              <div style="margin-top:10px" class="w3-display-container">
                <img src="images/wall.jpeg" class="w3-hover-opacity" alt="Flood Wall" onclick="turnonmeadow()")>
                <div class="w3-display-middle w3-large" style="color: rgb(255, 255, 255); text-shadow:1.5px 1.5px 0 rgb(0, 0, 0)">Flood Wall</div>
              </div>
            </details>  
          </div>
          <button onclick="accordion('oracle')" class="w3-button w3-block w3-left-align">
            <b>Quries</b></button>
            <div id="oracle" class="w3-container w3-hide">
              <p>Coming soon...</p>
            </div>
      </div>
      <div class="col-10" style="height: 85vh;" id="mapid"></div><br>
    </div>
  </div>
  <footer class="fixed-bottom center">
    <p>Â© 2022 University of Edinburgh</p>
  </footer>
</body>

<script language = "JavaScript">
  var graymap = L.tileLayer(
    'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
      maxZoom: 19, 
      minZoom: 12, 
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
    }
  );
  var osm = L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19, 
      minZoom: 12, 
      attribution: '&copy; <a href="http://osm.orgcopyright">OpenStreetMap</a> contributors'
    }
  );
  var map = L.map('mapid',{center:[55.9164043, -3.3070006], zoom:17, layers: graymap});
  var benchicon = L.icon({
    iconUrl: 'symbologies/bench.png',
    iconSize: [22.5, 10],
    iconAnchor: [11.1, 4.8],
    popupAnchor: [-3, -3]
  });
  var entranceicon = L.icon({
    iconUrl: 'symbologies/entrance.png',
    iconSize: [21.9, 24.5],
    iconAnchor: [12.2, 11.8],
    popupAnchor: [0, 0]
  });
  var mapicon = L.icon({
    iconUrl: 'symbologies/map.png',
    iconSize: [40, 30.6],
    iconAnchor: [19.5, 15],
  });
  var treeicon = L.icon({
    iconUrl: 'symbologies/tree.png',
    iconSize: [32.7, 30.4],
    iconAnchor: [12.4, 10.4],
  });
  var bush = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'Bush';
    },
    style: {stroke: false, fill: 'url(symbologies/bush.png)', fillOpacity:'1.0'}
  });
  var largewood = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'Large Wood';
    },
    style: {stroke: false, fill: 'url(symbologies/largewood.png)', fillOpacity:'1.0'}
  });
  var willow = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'Livewillow';
    },
    style: {stroke: false, fill: 'url(symbologies/willow.png)', fillOpacity:'1.0'}
  });
  var meadow = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'Meadow';
    },
    style: {stroke: false, fill: 'url(symbologies/meadow.png)', fillOpacity:'1.0'}
  });
  var river = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'River';
    },
    style: {stroke: false, fill: 'url(symbologies/river.png)', fillOpacity:'1.0'}
  });
  var woodland = L.geoJSON(polygon,{
    onEachFeature: onEachFeature,
    filter: function(poly, layer) {
      return poly.properties.Type == 'Woodland';
    },
    style: {stroke: false, fill: 'url(symbologies/woodland.png)', fillOpacity:'1.0'}
  });
  var wall = L.geoJSON(line,{
    onEachFeature: onEachFeature,
    filter: function(line, layer) {
      return line.properties.Type == 'Flood Wall';
    },
    style: {color: "#00008b", weight:'8'}
  });
  var path = L.geoJSON(line,{
    onEachFeature: onEachFeature,
    filter: function(line, layer) {
      return line.properties.Type == 'Path';
    },
    style: {color: '#808080', weight:'10'}
  });
  var bench = L.geoJSON(point, {
    onEachFeature: onEachFeature,
    filter: function(point, layer) {
      return point.properties.Type == 'Bench';
    },
    pointToLayer: function(point, latlng) {
      return L.marker(latlng,{icon:benchicon});
    }
  });
  var entrance = L.geoJSON(point, {
    onEachFeature: onEachFeature,
    filter: function(point, layer) {
      return point.properties.Type == 'Entrance';
    },
    pointToLayer: function(point, latlng) {
      return L.marker(latlng,{icon:entranceicon});
    }
  });
  var maps = L.geoJSON(point, {
    onEachFeature: onEachFeature,
    filter: function(point, layer) {
      return point.properties.Type == 'Map & Guide';
    },
    pointToLayer: function(point, latlng) {
      return L.marker(latlng,{icon:mapicon});
    }
  });
  var tree = L.geoJSON(point, {
    onEachFeature: onEachFeature,
    filter: function(point, layer) {
      return point.properties.Type == 'Tree';
    },
    pointToLayer: function(point, latlng) {
      return L.marker(latlng,{icon:treeicon});
    }
  });
  var proposal = L.layerGroup([bush, largewood, willow, meadow, river, woodland, wall, path, bench, entrance, maps, tree]).addTo(map);
  var baseMaps = {"CartoDB Positron": graymap, "OpenStreetMap": osm};
  var overlayMaps = {"Proposal": proposal};
  var layerControl = L.control.layers(baseMaps, overlayMaps).addTo(map);
  var scale = L.control.scale().addTo(map);
  function turnonwoodland() {
    if ((map.hasLayer(woodland)) || (map.hasLayer(tree))){
      woodland.remove();
      tree.remove();
    } else {
      woodland.addTo(map);
      tree.addTo(map);
    }
  };
  function turnonmeadow() {
    if (map.hasLayer(meadow)){
      meadow.remove();
    } else {
      meadow.addTo(map);
    }
  };
  function turnonwillow() {
    if (map.hasLayer(willow)){
      willow.remove();
    } else {
      willow.addTo(map);
    }
  };
  function turnonbush() {
    if (map.hasLayer(bush)){
      bush.remove();
    } else {
      bush.addTo(map);
    }
  };
  function turnonlargewood() {
    if (map.hasLayer(largewood)){
      largewood.remove();
    } else {
      largewood.addTo(map);
    }
  };
  function onEachFeature(feature, layer) {
    if (feature.properties && feature.properties.Type) {
        layer.bindPopup(feature.properties.Type);
    }
  };
  function accordion(id) {
    var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}
</script>
</html>